{"version":3,"file":"AuthRefreshDocs-B3sQRVYG.js","sources":["../../src/components/collections/docs/AuthRefreshDocs.svelte"],"sourcesContent":["<script>\n    import CodeBlock from \"@/components/base/CodeBlock.svelte\";\n    import FieldsQueryParam from \"@/components/collections/docs/FieldsQueryParam.svelte\";\n    import SdkTabs from \"@/components/base/SdkTabs.svelte\";\n    import ApiClient from \"@/utils/ApiClient\";\n    import CommonHelper from \"@/utils/CommonHelper\";\n\n    export let collection;\n\n    let responseTab = 200;\n    let responses = [];\n\n    $: backendAbsUrl = CommonHelper.getApiExampleUrl(ApiClient.baseURL);\n\n    $: responses = [\n        {\n            code: 200,\n            body: JSON.stringify(\n                {\n                    token: \"JWT_TOKEN\",\n                    record: CommonHelper.dummyCollectionRecord(collection),\n                },\n                null,\n                2,\n            ),\n        },\n        {\n            code: 401,\n            body: `\n                {\n                  \"status\": 401,\n                  \"message\": \"The request requires valid record authorization token to be set.\",\n                  \"data\": {}\n                }\n            `,\n        },\n        {\n            code: 403,\n            body: `\n                {\n                  \"status\": 403,\n                  \"message\": \"The authorized record model is not allowed to perform this action.\",\n                  \"data\": {}\n                }\n            `,\n        },\n        {\n            code: 404,\n            body: `\n                {\n                  \"status\": 404,\n                  \"message\": \"Missing auth record context.\",\n                  \"data\": {}\n                }\n            `,\n        },\n    ];\n</script>\n\n<h3 class=\"m-b-sm\">Auth refresh ({collection.name})</h3>\n<div class=\"content txt-lg m-b-sm\">\n    <p>\n        Returns a new auth response (token and record data) for an\n        <strong>already authenticated record</strong>.\n    </p>\n    <p>\n        This method is usually called by users on page/screen reload to ensure that the previously stored data\n        in <code>pb.authStore</code> is still valid and up-to-date.\n    </p>\n</div>\n\n<SdkTabs\n    js={`\n        import PocketBase from 'pocketbase';\n\n        const pb = new PocketBase('${backendAbsUrl}');\n\n        ...\n\n        const authData = await pb.collection('${collection?.name}').authRefresh();\n\n        // after the above you can also access the refreshed auth data from the authStore\n        console.log(pb.authStore.isValid);\n        console.log(pb.authStore.token);\n        console.log(pb.authStore.record.id);\n    `}\n    dart={`\n        import 'package:pocketbase/pocketbase.dart';\n\n        final pb = PocketBase('${backendAbsUrl}');\n\n        ...\n\n        final authData = await pb.collection('${collection?.name}').authRefresh();\n\n        // after the above you can also access the refreshed auth data from the authStore\n        print(pb.authStore.isValid);\n        print(pb.authStore.token);\n        print(pb.authStore.record.id);\n    `}\n/>\n\n<h6 class=\"m-b-xs\">API details</h6>\n<div class=\"alert alert-success\">\n    <strong class=\"label label-primary\">POST</strong>\n    <div class=\"content\">\n        <p>\n            /api/collections/<strong>{collection.name}</strong>/auth-refresh\n        </p>\n    </div>\n    <p class=\"txt-hint txt-sm txt-right\">Requires <code>Authorization:TOKEN</code> header</p>\n</div>\n\n<div class=\"section-title\">Query parameters</div>\n<table class=\"table-compact table-border m-b-base\">\n    <thead>\n        <tr>\n            <th>Param</th>\n            <th>Type</th>\n            <th width=\"60%\">Description</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>expand</td>\n            <td>\n                <span class=\"label\">String</span>\n            </td>\n            <td>\n                Auto expand record relations. Ex.:\n                <CodeBlock content={`?expand=relField1,relField2.subRelField`} />\n                Supports up to 6-levels depth nested relations expansion. <br />\n                The expanded relations will be appended to the record under the\n                <code>expand</code> property (eg. <code>{`\"expand\": {\"relField1\": {...}, ...}`}</code>).\n                <br />\n                Only the relations to which the request user has permissions to <strong>view</strong> will be expanded.\n            </td>\n        </tr>\n        <FieldsQueryParam prefix=\"record.\" />\n    </tbody>\n</table>\n\n<div class=\"section-title\">Responses</div>\n<div class=\"tabs\">\n    <div class=\"tabs-header compact combined left\">\n        {#each responses as response (response.code)}\n            <button\n                class=\"tab-item\"\n                class:active={responseTab === response.code}\n                on:click={() => (responseTab = response.code)}\n            >\n                {response.code}\n            </button>\n        {/each}\n    </div>\n    <div class=\"tabs-content\">\n        {#each responses as response (response.code)}\n            <div class=\"tab-item\" class:active={responseTab === response.code}>\n                <CodeBlock content={response.body} />\n            </div>\n        {/each}\n    </div>\n</div>\n"],"names":["t0_value","ctx","insert","target","button","anchor","dirty","set_data","t0","div","codeblock_changes","t1_value","t18_value","_a","_b","get_key","i","get_key_1","h3","div0","h6","div2","append","strong1","div1","p2","strong2","p3","div3","table","thead","tbody","tr1","td0","td1","td2","br0","code2","code3","br1","strong3","div4","div7","div5","div6","current","t1","t18","collection","$$props","responseTab","responses","response","CommonHelper","$$invalidate","backendAbsUrl","ApiClient"],"mappings":"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"}