{"version":3,"file":"AuthWithOtpDocs-CBg7MmtQ.js","sources":["../../src/components/collections/docs/AuthWithOtpApiAuthDocs.svelte","../../src/components/collections/docs/AuthWithOtpApiRequestDocs.svelte","../../src/components/collections/docs/AuthWithOtpDocs.svelte"],"sourcesContent":["<script>\n    import CommonHelper from \"@/utils/CommonHelper\";\n    import CodeBlock from \"@/components/base/CodeBlock.svelte\";\n    import FieldsQueryParam from \"@/components/collections/docs/FieldsQueryParam.svelte\";\n\n    export let collection;\n\n    let responseTab = 200;\n    let responses = [];\n\n    $: responses = [\n        {\n            code: 200,\n            body: JSON.stringify(\n                {\n                    token: \"JWT_TOKEN\",\n                    record: CommonHelper.dummyCollectionRecord(collection),\n                },\n                null,\n                2,\n            ),\n        },\n        {\n            code: 400,\n            body: `\n                {\n                  \"status\": 400,\n                  \"message\": \"Failed to authenticate.\",\n                  \"data\": {\n                    \"otpId\": {\n                      \"code\": \"validation_required\",\n                      \"message\": \"Missing required value.\"\n                    }\n                  }\n                }\n            `,\n        },\n    ];\n</script>\n\n<div class=\"alert alert-success\">\n    <strong class=\"label label-primary\">POST</strong>\n    <div class=\"content\">\n        <p>\n            /api/collections/<strong>{collection.name}</strong>/auth-with-otp\n        </p>\n    </div>\n</div>\n\n<div class=\"section-title\">Body Parameters</div>\n<table class=\"table-compact table-border m-b-base\">\n    <thead>\n        <tr>\n            <th>Param</th>\n            <th>Type</th>\n            <th width=\"50%\">Description</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>\n                <div class=\"inline-flex\">\n                    <span class=\"label label-success\">Required</span>\n                    <span>otpId</span>\n                </div>\n            </td>\n            <td>\n                <span class=\"label\">String</span>\n            </td>\n            <td>The id of the OTP request.</td>\n        </tr>\n        <tr>\n            <td>\n                <div class=\"inline-flex\">\n                    <span class=\"label label-success\">Required</span>\n                    <span>password</span>\n                </div>\n            </td>\n            <td>\n                <span class=\"label\">String</span>\n            </td>\n            <td>The one-time password.</td>\n        </tr>\n    </tbody>\n</table>\n\n<div class=\"section-title\">Query parameters</div>\n<table class=\"table-compact table-border m-b-base\">\n    <thead>\n        <tr>\n            <th>Param</th>\n            <th>Type</th>\n            <th width=\"60%\">Description</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>expand</td>\n            <td>\n                <span class=\"label\">String</span>\n            </td>\n            <td>\n                Auto expand record relations. Ex.:\n                <CodeBlock content={`?expand=relField1,relField2.subRelField`} />\n                Supports up to 6-levels depth nested relations expansion. <br />\n                The expanded relations will be appended to the record under the\n                <code>expand</code> property (eg. <code>{`\"expand\": {\"relField1\": {...}, ...}`}</code>).\n                <br />\n                Only the relations to which the request user has permissions to <strong>view</strong> will be expanded.\n            </td>\n        </tr>\n        <FieldsQueryParam prefix=\"record.\" />\n    </tbody>\n</table>\n\n<div class=\"section-title\">Responses</div>\n<div class=\"tabs\">\n    <div class=\"tabs-header compact combined left\">\n        {#each responses as response (response.code)}\n            <button\n                class=\"tab-item\"\n                class:active={responseTab === response.code}\n                on:click={() => (responseTab = response.code)}\n            >\n                {response.code}\n            </button>\n        {/each}\n    </div>\n    <div class=\"tabs-content\">\n        {#each responses as response (response.code)}\n            <div class=\"tab-item\" class:active={responseTab === response.code}>\n                <CodeBlock content={response.body} />\n            </div>\n        {/each}\n    </div>\n</div>\n","<script>\n    import CodeBlock from \"@/components/base/CodeBlock.svelte\";\n    import CommonHelper from \"@/utils/CommonHelper\";\n\n    export let collection;\n\n    let responseTab = 200;\n    let responses = [];\n\n    $: responses = [\n        {\n            code: 200,\n            body: JSON.stringify(\n                {\n                    otpId: CommonHelper.randomString(15),\n                },\n                null,\n                2,\n            ),\n        },\n        {\n            code: 400,\n            body: `\n                {\n                  \"status\": 400,\n                  \"message\": \"An error occurred while validating the submitted data.\",\n                  \"data\": {\n                    \"email\": {\n                      \"code\": \"validation_is_email\",\n                      \"message\": \"Must be a valid email address.\"\n                    }\n                  }\n                }\n            `,\n        },\n        {\n            code: 429,\n            body: `\n                {\n                  \"status\": 429,\n                  \"message\": \"You've send too many OTP requests, please try again later.\",\n                  \"data\": {}\n                }\n            `,\n        },\n    ];\n</script>\n\n<div class=\"alert alert-success\">\n    <strong class=\"label label-primary\">POST</strong>\n    <div class=\"content\">\n        <p>\n            /api/collections/<strong>{collection.name}</strong>/request-otp\n        </p>\n    </div>\n</div>\n\n<div class=\"section-title\">Body Parameters</div>\n<table class=\"table-compact table-border m-b-base\">\n    <thead>\n        <tr>\n            <th>Param</th>\n            <th>Type</th>\n            <th width=\"50%\">Description</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>\n                <div class=\"inline-flex\">\n                    <span class=\"label label-success\">Required</span>\n                    <span>email</span>\n                </div>\n            </td>\n            <td>\n                <span class=\"label\">String</span>\n            </td>\n            <td>The auth record email address to send the OTP request (if exists).</td>\n        </tr>\n    </tbody>\n</table>\n\n<div class=\"section-title\">Responses</div>\n<div class=\"tabs\">\n    <div class=\"tabs-header compact combined left\">\n        {#each responses as response (response.code)}\n            <button\n                class=\"tab-item\"\n                class:active={responseTab === response.code}\n                on:click={() => (responseTab = response.code)}\n            >\n                {response.code}\n            </button>\n        {/each}\n    </div>\n    <div class=\"tabs-content\">\n        {#each responses as response (response.code)}\n            <div class=\"tab-item\" class:active={responseTab === response.code}>\n                <CodeBlock content={response.body} />\n            </div>\n        {/each}\n    </div>\n</div>\n","<script>\n    import AuthWithOtpApiAuthDocs from \"@/components/collections/docs/AuthWithOtpApiAuthDocs.svelte\";\n    import AuthWithOtpApiRequestDocs from \"@/components/collections/docs/AuthWithOtpApiRequestDocs.svelte\";\n    import SdkTabs from \"@/components/base/SdkTabs.svelte\";\n    import ApiClient from \"@/utils/ApiClient\";\n    import CommonHelper from \"@/utils/CommonHelper\";\n\n    export let collection;\n\n    const apiTabs = [\n        { title: \"OTP Request\", component: AuthWithOtpApiRequestDocs },\n        { title: \"OTP Auth\", component: AuthWithOtpApiAuthDocs },\n    ];\n\n    let activeApiTab = 0;\n\n    $: backendAbsUrl = CommonHelper.getApiExampleUrl(ApiClient.baseURL);\n</script>\n\n<h3 class=\"m-b-sm\">Auth with OTP ({collection.name})</h3>\n<div class=\"content txt-lg m-b-sm\">\n    <p>Authenticate with an one-time password (OTP).</p>\n    <p>\n        Note that when requesting an OTP we return an <code>otpId</code> even if a user with the provided email\n        doesn't exist as a very basic enumeration protection.\n    </p>\n</div>\n\n<SdkTabs\n    js={`\n        import PocketBase from 'pocketbase';\n\n        const pb = new PocketBase('${backendAbsUrl}');\n\n        ...\n\n        // send OTP email to the provided auth record\n        const req = await pb.collection('${collection?.name}').requestOTP('test@example.com');\n\n        // ... show a screen/popup to enter the password from the email ...\n\n        // authenticate with the requested OTP id and the email password\n        const authData = await pb.collection('${collection?.name}').authWithOTP(\n            req.otpId,\n            \"YOUR_OTP\",\n        );\n\n        // after the above you can also access the auth data from the authStore\n        console.log(pb.authStore.isValid);\n        console.log(pb.authStore.token);\n        console.log(pb.authStore.record.id);\n\n        // \"logout\"\n        pb.authStore.clear();\n    `}\n    dart={`\n        import 'package:pocketbase/pocketbase.dart';\n\n        final pb = PocketBase('${backendAbsUrl}');\n\n        ...\n\n        // send OTP email to the provided auth record\n        final req = await pb.collection('${collection?.name}').requestOTP('test@example.com');\n\n        // ... show a screen/popup to enter the password from the email ...\n\n        // authenticate with the requested OTP id and the email password\n        final authData = await pb.collection('${collection?.name}').authWithOTP(\n            req.otpId,\n            \"YOUR_OTP\",\n        );\n\n        // after the above you can also access the auth data from the authStore\n        print(pb.authStore.isValid);\n        print(pb.authStore.token);\n        print(pb.authStore.record.id);\n\n        // \"logout\"\n        pb.authStore.clear();\n    `}\n/>\n\n<h6 class=\"m-b-xs\">API details</h6>\n<div class=\"tabs\">\n    <div class=\"tabs-header compact\">\n        {#each apiTabs as tab, i}\n            <button class=\"tab-item\" class:active={activeApiTab == i} on:click={() => (activeApiTab = i)}>\n                <div class=\"txt\">{tab.title}</div>\n            </button>\n        {/each}\n    </div>\n    <div class=\"tabs-content\">\n        {#each apiTabs as tab, i}\n            <div class=\"tab-item\" class:active={activeApiTab == i}>\n                <svelte:component this={tab.component} {collection} />\n            </div>\n        {/each}\n    </div>\n</div>\n"],"names":["t0_value","ctx","insert","target","button","anchor","dirty","set_data","t0","div","codeblock_changes","t3_value","get_key","i","get_key_1","div1","append","strong0","div0","p","strong1","div2","table0","div5","table1","thead1","tbody1","tr4","td6","td7","td8","br0","code0","code1","br1","strong2","div6","div9","div7","div8","current","t3","collection","$$props","responseTab","responses","response","CommonHelper","table","div4","toggle_class","switch_value","t1_value","_a","_b","_c","_d","h3","h6","div3","t1","each_blocks","apiTabs","AuthWithOtpApiRequestDocs","AuthWithOtpApiAuthDocs","activeApiTab","click_handler","$$invalidate","backendAbsUrl","ApiClient"],"mappings":"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"}