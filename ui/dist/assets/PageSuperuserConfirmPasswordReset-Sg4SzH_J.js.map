{"version":3,"file":"PageSuperuserConfirmPasswordReset-Sg4SzH_J.js","sources":["../../src/components/superusers/PageSuperuserConfirmPasswordReset.svelte"],"sourcesContent":["<script>\n    import { link, replace } from \"svelte-spa-router\";\n    import ApiClient from \"@/utils/ApiClient\";\n    import CommonHelper from \"@/utils/CommonHelper\";\n    import { addSuccessToast } from \"@/stores/toasts\";\n    import FullPage from \"@/components/base/FullPage.svelte\";\n    import Field from \"@/components/base/Field.svelte\";\n\n    export let params;\n\n    let newPassword = \"\";\n    let newPasswordConfirm = \"\";\n    let isLoading = false;\n\n    $: email = CommonHelper.getJWTPayload(params?.token).email || \"\";\n\n    async function submit() {\n        if (isLoading) {\n            return;\n        }\n\n        isLoading = true;\n\n        try {\n            await ApiClient.collection(\"_superusers\").confirmPasswordReset(\n                params?.token,\n                newPassword,\n                newPasswordConfirm,\n            );\n            addSuccessToast(\"Successfully set a new superuser password.\");\n            replace(\"/\");\n        } catch (err) {\n            ApiClient.error(err);\n        }\n\n        isLoading = false;\n    }\n</script>\n\n<FullPage>\n    <form class=\"m-b-base\" on:submit|preventDefault={submit}>\n        <div class=\"content txt-center m-b-sm\">\n            <h4 class=\"m-b-xs\">\n                Reset your superuser password\n                {#if email}\n                    for <strong class=\"txt-nowrap\">{email}</strong>\n                {/if}\n            </h4>\n        </div>\n\n        <Field class=\"form-field required\" name=\"password\" let:uniqueId>\n            <label for={uniqueId}>New password</label>\n            <!-- svelte-ignore a11y-autofocus -->\n            <input type=\"password\" id={uniqueId} required autofocus bind:value={newPassword} />\n        </Field>\n\n        <Field class=\"form-field required\" name=\"passwordConfirm\" let:uniqueId>\n            <label for={uniqueId}>New password confirm</label>\n            <input type=\"password\" id={uniqueId} required bind:value={newPasswordConfirm} />\n        </Field>\n\n        <button type=\"submit\" class=\"btn btn-lg btn-block\" class:btn-loading={isLoading} disabled={isLoading}>\n            <span class=\"txt\">Set new password</span>\n        </button>\n    </form>\n\n    <div class=\"content txt-center\">\n        <a href=\"/login\" class=\"link-hint\" use:link>Back to login</a>\n    </div>\n</FullPage>\n"],"names":["ctx","insert","target","strong","anchor","label","input","create_if_block","form","append","div0","h4","button","span","div1","a","params","$$props","newPassword","newPasswordConfirm","isLoading","submit","$$invalidate","ApiClient","addSuccessToast","replace","err","email","CommonHelper"],"mappings":"mRA4C0B,MACF,oBAA4BA,EAAK,CAAA,CAAA,6CAAjCC,EAA0CC,EAAAC,EAAAC,CAAA,0BAAdJ,EAAK,CAAA,CAAA,uFAMvB,cAAY,iCAAtBA,EAAQ,CAAA,CAAA,oCAEOA,EAAQ,CAAA,CAAA,uCAFnCC,EAAyCC,EAAAG,EAAAD,CAAA,kBAEzCH,EAAkFC,EAAAI,EAAAF,CAAA,MAAdJ,EAAW,CAAA,CAAA,gEAFnEA,EAAQ,CAAA,+BAEOA,EAAQ,CAAA,+BAAiCA,EAAW,CAAA,OAAXA,EAAW,CAAA,CAAA,sGAIzD,sBAAoB,iCAA9BA,EAAQ,CAAA,CAAA,oCACOA,EAAQ,CAAA,CAAA,wBADnCC,EAAiDC,EAAAG,EAAAD,CAAA,kBACjDH,EAA+EC,EAAAI,EAAAF,CAAA,MAArBJ,EAAkB,CAAA,CAAA,sDADhEA,EAAQ,CAAA,+BACOA,EAAQ,CAAA,+BAAuBA,EAAkB,CAAA,OAAlBA,EAAkB,CAAA,CAAA,8FAdnEA,EAAK,CAAA,GAAAO,EAAAP,CAAA,qWAFI;AAAA,iBAEd,wUAiBmFA,EAAS,CAAA,oBAA9BA,EAAS,CAAA,CAAA,kHArBnFC,EAwBMC,EAAAM,EAAAJ,CAAA,EAvBFK,EAOKD,EAAAE,CAAA,EANDD,EAKIC,EAAAC,CAAA,qEAcRF,EAEQD,EAAAI,CAAA,EADJH,EAAwCG,EAAAC,CAAA,WAIhDZ,EAEKC,EAAAY,EAAAV,CAAA,EADDK,EAA4DK,EAAAC,CAAA,6BA3Bff,EAAM,CAAA,CAAA,CAAA,mCAItCA,EAAK,CAAA,kMAiByEA,EAAS,CAAA,gCAA9BA,EAAS,CAAA,CAAA,kdArDxE,OAAAgB,CAAM,EAAAC,EAEbC,EAAc,GACdC,EAAqB,GACrBC,EAAY,kBAIDC,GAAM,IACb,CAAAD,EAIJ,CAAAE,EAAA,EAAAF,EAAY,EAAI,MAGN,MAAAG,EAAU,WAAW,aAAa,EAAE,qBACtCP,GAAA,YAAAA,EAAQ,MACRE,EACAC,CAAkB,EAEtBK,EAAgB,4CAA4C,EAC5DC,EAAQ,GAAG,QACNC,EAAG,CACRH,EAAU,MAAMG,CAAG,EAGvBJ,EAAA,EAAAF,EAAY,EAAK,gBAkBuDF,EAAW,KAAA,0BAKrBC,EAAkB,KAAA,+FA5CjFG,EAAA,EAAAK,EAAQC,EAAa,cAAcZ,GAAA,YAAAA,EAAQ,KAAK,EAAE,OAAS,EAAE"}