{"version":3,"file":"RealtimeApiDocs-Cx7_kOTM.js","sources":["../../src/components/collections/docs/RealtimeApiDocs.svelte"],"sourcesContent":["<script>\n    import CodeBlock from \"@/components/base/CodeBlock.svelte\";\n    import SdkTabs from \"@/components/base/SdkTabs.svelte\";\n    import ApiClient from \"@/utils/ApiClient\";\n    import CommonHelper from \"@/utils/CommonHelper\";\n\n    export let collection;\n\n    $: backendAbsUrl = CommonHelper.getApiExampleUrl(ApiClient.baseURL);\n</script>\n\n<h3 class=\"m-b-sm\">Realtime ({collection.name})</h3>\n<div class=\"content txt-lg m-b-sm\">\n    <p>Subscribe to realtime changes via Server-Sent Events (SSE).</p>\n    <p>\n        Events are sent for <strong>create</strong>, <strong>update</strong>\n        and <strong>delete</strong> record operations (see \"Event data format\" section below).\n    </p>\n</div>\n<div class=\"alert alert-info m-t-10 m-b-sm\">\n    <div class=\"icon\">\n        <i class=\"ri-information-line\" />\n    </div>\n    <div class=\"contet\">\n        <p>\n            <strong>You could subscribe to a single record or to an entire collection.</strong>\n        </p>\n        <p>\n            When you subscribe to a <strong>single record</strong>, the collection's\n            <strong>ViewRule</strong> will be used to determine whether the subscriber has access to receive the\n            event message.\n        </p>\n        <p>\n            When you subscribe to an <strong>entire collection</strong>, the collection's\n            <strong>ListRule</strong> will be used to determine whether the subscriber has access to receive the\n            event message.\n        </p>\n    </div>\n</div>\n\n<SdkTabs\n    js={`\n        import PocketBase from 'pocketbase';\n\n        const pb = new PocketBase('${backendAbsUrl}');\n\n        ...\n\n        // (Optionally) authenticate\n        await pb.collection('users').authWithPassword('test@example.com', '123456');\n\n        // Subscribe to changes in any ${collection?.name} record\n        pb.collection('${collection?.name}').subscribe('*', function (e) {\n            console.log(e.action);\n            console.log(e.record);\n        }, { /* other options like: filter, expand, custom headers, etc. */ });\n\n        // Subscribe to changes only in the specified record\n        pb.collection('${collection?.name}').subscribe('RECORD_ID', function (e) {\n            console.log(e.action);\n            console.log(e.record);\n        }, { /* other options like: filter, expand, custom headers, etc. */ });\n\n        // Unsubscribe\n        pb.collection('${collection?.name}').unsubscribe('RECORD_ID'); // remove all 'RECORD_ID' subscriptions\n        pb.collection('${collection?.name}').unsubscribe('*'); // remove all '*' topic subscriptions\n        pb.collection('${collection?.name}').unsubscribe(); // remove all subscriptions in the collection\n    `}\n    dart={`\n        import 'package:pocketbase/pocketbase.dart';\n\n        final pb = PocketBase('${backendAbsUrl}');\n\n        ...\n\n        // (Optionally) authenticate\n        await pb.collection('users').authWithPassword('test@example.com', '123456');\n\n        // Subscribe to changes in any ${collection?.name} record\n        pb.collection('${collection?.name}').subscribe('*', (e) {\n            print(e.action);\n            print(e.record);\n        }, /* other options like: filter, expand, custom headers, etc. */);\n\n        // Subscribe to changes only in the specified record\n        pb.collection('${collection?.name}').subscribe('RECORD_ID', (e) {\n            print(e.action);\n            print(e.record);\n        }, /* other options like: filter, expand, custom headers, etc. */);\n\n        // Unsubscribe\n        pb.collection('${collection?.name}').unsubscribe('RECORD_ID'); // remove all 'RECORD_ID' subscriptions\n        pb.collection('${collection?.name}').unsubscribe('*'); // remove all '*' topic subscriptions\n        pb.collection('${collection?.name}').unsubscribe(); // remove all subscriptions in the collection\n    `}\n/>\n\n<h6 class=\"m-b-xs\">API details</h6>\n<div class=\"alert\">\n    <strong class=\"label label-primary\">SSE</strong>\n    <div class=\"content\">\n        <p>/api/realtime</p>\n    </div>\n</div>\n\n<div class=\"section-title\">Event data format</div>\n<CodeBlock\n    content={JSON.stringify(\n        {\n            action: \"create\",\n            record: CommonHelper.dummyCollectionRecord(collection),\n        },\n        null,\n        2,\n    ).replace('\"action\": \"create\"', '\"action\": \"create\" // create, update or delete')}\n/>\n"],"names":["t1_value","ctx","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","CommonHelper","insert","target","h3","anchor","div0","div3","h6","div5","div6","current","dirty","set_data","t1","codeblock_changes","collection","$$props","$$invalidate","backendAbsUrl","ApiClient"],"mappings":"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"}